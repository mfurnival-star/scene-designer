#!/bin/bash

DIR="./src"
SPACING="    "           # Indentation for menu items
CONFIRM_OVERWRITE=false  # Set to false to skip confirmation prompt

# ANSI color codes
YELLOW="\033[1;33m"
RESET="\033[0m"

while true; do
    echo ""
    echo "📁 Available Files in $DIR"
    echo "---------------------------"
    files=("$DIR"/*)
    for i in "${!files[@]}"; do
        printf "${SPACING}${YELLOW}%2d${RESET} → %s\n" "$i" "${files[$i]##*/}"
    done
    echo "---------------------------"
    echo "Enter the number of the file to overwrite (Ctrl+C to quit):"
    read -r choice

    if [[ "$choice" =~ ^[0-9]+$ ]] && [ "$choice" -lt "${#files[@]}" ]; then
        selected="${files[$choice]}"
        echo ""
        echo "⚠️ You selected: ${selected}"

        if [ "$CONFIRM_OVERWRITE" = true ]; then
            echo "Are you sure you want to overwrite this file? (y/n)"
            read -r confirm
            if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
                echo "↩️ Cancelled. Returning to menu..."
                continue
            fi
        fi

        echo ""
        echo "✍️ Start typing your content. Press Ctrl+D when you're done."
        cat > "$selected"
        echo "✅ File saved. Returning to menu..."
    else
        echo "❌ Invalid choice. Please enter a valid number."
    fi
done

